function AFK_Kicker(){}AFK_Kicker.TIMER=0;AFK_Kicker.KICK_TIME=12E4;AFK_Kicker.init=function(){AFK_Kicker.TIMER=(new Date).getTime();window.addEventListener("click",AFK_Kicker.resetTimer);window.addEventListener("mousemove",AFK_Kicker.resetTimer);window.addEventListener("keydown",AFK_Kicker.resetTimer);window.addEventListener("keyup",AFK_Kicker.resetTimer)};AFK_Kicker.check=function(){(new Date).getTime()>AFK_Kicker.TIMER+AFK_Kicker.KICK_TIME&&location.reload()};
AFK_Kicker.resetTimer=function(){AFK_Kicker.TIMER=(new Date).getTime()};var socket=io(),game=new Game(document.getElementById("canvas"),socket),leaderboard=new Leaderboard($("#leaderboard"));$(document).ready(function(){$("#name-input").focus()});function send_name(){(name=$("#name-input").val())&&""!=name&&20>name.length?(socket.emit("new-player",{name:name}),$("#name-prompt-container").empty(),$("#name-prompt-container").append($("<span>").addClass("fa fa-2x fa-spinner fa-pulse"))):window.alert("Your name cannot be blank or over 20 characters.");return!1}$("#name-form").submit(send_name);
$("#name-submit").click(send_name);socket.on("send-id",function(a){game.setID(a.id);$("#name-prompt-overlay").fadeOut(500);init();animate()});socket.on("update",function(a){game.receiveGameState(a)});function init(){Input.applyEventHandlers();AFK_Kicker.init()}function animate(){AFK_Kicker.check();game.update();game.draw();leaderboard.update(game.getPlayers());window.requestAnimFrame(animate)};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1E3/60)}}();
